<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
</head>
<body>
<h1>Ball Game</h1>
<button id="btnCreate">New Game</button>
<script>
    //Html elements
    const btnCreate = document.getElementById('btnCreate');

    //wiring events
    btnCreate.addEventListener('click', e => {

        const payLoad = {
            "method": "create",
            "clientId": clientId
        };

        ws.send(JSON.stringify(payLoad))
    })

    let clientId = null;
    let ws = new WebSocket("ws://localhost:9090");
    ws.onmessage = message => {
        //message.data
        const response = JSON.parse(message.data);
        // connect
        if(response.method === "connect") {
            clientId = response.clientId;
            console.log(`Client id set successfully ${clientId}`)
        }

        //create
        if(response.method === 'create'){
            gameId = response.game.id;
            balls = response.game.balls;
            console.log(`Game successfully created with id ${gameId} with ${balls} balls`);
        }
    }
</script>
</body>
</html>
